// âœ… Script que respeta nombre y correo PARA N8N
let paso = 1;

function manejarFlujo() {
  if (paso === 1) {
    const nombre = document.getElementById("nombreUsuario").value.trim();
    if (nombre === "") return;

    // âœ… Mostrar burbuja usuario (nombre)
    const burbujaUser = document.createElement('div');
    burbujaUser.className = 'bubble user';
    burbujaUser.textContent = nombre;
    document.body.insertBefore(burbujaUser, document.querySelector('.input-container'));

    // âœ… Cambiar pregunta
    document.getElementById("pregunta-dinamica").innerHTML =
      "âœ¨ Y para poder enviarte este y otros encuentros especiales,<br>Â¿podrÃ­as dejarme tu correo?<br>Prometo cuidarlo bien, como cuido este espacio contigo.";

    // âœ… Mostrar input correo y ocultar nombre
    document.getElementById("nombreUsuario").style.display = "none";
    document.getElementById("emailUsuario").style.display = "block";
    paso = 2;

  } else if (paso === 2) {
    const correo = document.getElementById("emailUsuario").value.trim();
    if (correo === "") return;

    // âœ… Mostrar burbuja usuario (correo)
    const burbujaUser = document.createElement('div');
    burbujaUser.className = 'bubble user';
    burbujaUser.textContent = correo;
    document.body.insertBefore(burbujaUser, document.querySelector('.input-container'));

    // âœ… Final mensaje
    document.getElementById("pregunta-dinamica").innerHTML = "Â¡Gracias por confiar! Este espacio es tuyo. ðŸŒ±";
    document.querySelector('.input-container').style.display = "none";
  }
}
